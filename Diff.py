#    coding=utf-8

import difflib


def diff_t(transcription, original_text):
    text_tr = transcription.split()
    text_or = original_text.split()

    diff = list(difflib.ndiff(text_or, text_tr))
    result = []
    for word in diff:
        if word[0] != " ":
            w = word.split(" ")
            result.append(w[1])

    return diff

def get_errors(difflist):
    print(difflist)
    result = []
    for i in range(len(difflist)):
        if difflist[i][0]=='-' or difflist[i][0]==' ':
            result.append({'pos': i, 'word': difflist[i]})
    return result

def get_extensions(difflist):
    result = []
    for i in range(len(difflist)):
        if difflist[i][0]=='+' or difflist[i][0]==' ':
            result.append({'pos': i, 'word': difflist[i]})
    return result


transcription = "vecchi proverbi di notte sentence sentenza viva un vecchio piano piano piano e io sono nero disse un gatto nero attraversando la strada è impossibile vecchi proverbi hanno sempre ragione ma io sono nero lo stesso ripetere il gatto per la sorpresa Sorpresa e l'amarezza il vecchio proverbio cadde dal tetto e si ruppe una gamba un altro vecchio proverbio andò a vedere una partita di calcio prese da una parte il giocatore un giocatore su uno nell'orecchio che fa da sé Chi fa da sé fa per te mentre il giocatore si provò a giocare il pallone da solo ma era una noia da morire e non poteva vincere mai perciò fece ritorno in squadra il vecchio proverbio per il disappunto si ammalò e dovete toglierli le tonsille una volta tre vecchi proverbi si incontrarono e Avevano appena aperto bocca che cominciarono a litigare che bene comincia a metà dell'opera disse il primo Niente affatto disse il secondo la virtù sta nel mezzo gravissimo errore al terzo il dolce in fondo Si prese per i capelli si presero per i capelli sono ancora là che si dà che se le danno poi c'è la storia di quel vecchio proverbio che aveva voglia di una pera e si mise sotto l'albero e intanto pensava quando la pera e matura casca da se ma la pera cascò solo quando fu marcia marcia fradicia e si spiaccicò sulla zucca del vecchio proverbio che per il dispiacere diede le dimissioni"
offsets = [{'start': 0.1, 'end': 1.3, 'word': 'vecchi'}, {'start': 1.3, 'end': 1.9, 'word': 'proverbi'}, {'start': 1.9, 'end': 2.6, 'word': 'di'}, {'start': 2.6, 'end': 3.1, 'word': 'notte'}, {'start': 3.1, 'end': 4.8, 'word': 'sentence'}, {'start': 4.8, 'end': 5.6, 'word': 'sentenza'}, {'start': 5.6, 'end': 6.0, 'word': 'viva'}, {'start': 6.0, 'end': 6.3, 'word': 'un'}, {'start': 6.3, 'end': 6.8, 'word': 'vecchio'}, {'start': 6.8, 'end': 7.4, 'word': 'piano'}, {'start': 7.4, 'end': 7.6, 'word': 'piano'}, {'start': 7.6, 'end': 7.7, 'word': 'piano'}, {'start': 7.7, 'end': 8.0, 'word': 'e'}, {'start': 8.0, 'end': 12.5, 'word': 'io'}, {'start': 12.5, 'end': 12.9, 'word': 'sono'}, {'start': 12.9, 'end': 13.3, 'word': 'nero'}, {'start': 13.3, 'end': 14.5, 'word': 'disse'}, {'start': 14.5, 'end': 14.6, 'word': 'un'}, {'start': 14.6, 'end': 15.1, 'word': 'gatto'}, {'start': 15.1, 'end': 15.5, 'word': 'nero'}, {'start': 15.5, 'end': 16.9, 'word': 'attraversando'}, {'start': 16.9, 'end': 17.1, 'word': 'la'}, {'start': 17.1, 'end': 17.4, 'word': 'strada'}, {'start': 17.4, 'end': 17.7, 'word': '\xc3\xa8'}, {'start': 17.7, 'end': 19.7, 'word': 'impossibile'}, {'start': 19.7, 'end': 20.4, 'word': 'vecchi'}, {'start': 20.4, 'end': 21.0, 'word': 'proverbi'}, {'start': 21.0, 'end': 21.1, 'word': 'hanno'}, {'start': 21.1, 'end': 21.4, 'word': 'sempre'}, {'start': 21.4, 'end': 21.8, 'word': 'ragione'}, {'start': 21.8, 'end': 22.9, 'word': 'ma'}, {'start': 22.9, 'end': 23.1, 'word': 'io'}, {'start': 23.1, 'end': 23.5, 'word': 'sono'}, {'start': 23.5, 'end': 24.0, 'word': 'nero'}, {'start': 24.0, 'end': 24.3, 'word': 'lo'}, {'start': 24.3, 'end': 24.9, 'word': 'stesso'}, {'start': 24.9, 'end': 26.6, 'word': 'ripetere'}, {'start': 26.6, 'end': 26.7, 'word': 'il'}, {'start': 26.7, 'end': 27.2, 'word': 'gatto'}, {'start': 27.2, 'end': 28.1, 'word': 'per'}, {'start': 28.1, 'end': 28.2, 'word': 'la'}, {'start': 28.2, 'end': 29.4, 'word': 'sorpresa'}, {'start': 29.4, 'end': 32.1, 'word': 'Sorpresa'}, {'start': 32.1, 'end': 32.8, 'word': 'e'}, {'start': 32.8, 'end': 34.3, 'word': "l'amarezza"}, {'start': 34.3, 'end': 36.1, 'word': 'il'}, {'start': 36.1, 'end': 36.6, 'word': 'vecchio'}, {'start': 36.6, 'end': 37.3, 'word': 'proverbio'}, {'start': 37.3, 'end': 38.1, 'word': 'cadde'}, {'start': 38.1, 'end': 38.7, 'word': 'dal'}, {'start': 38.7, 'end': 39.1, 'word': 'tetto'}, {'start': 39.1, 'end': 39.3, 'word': 'e'}, {'start': 39.3, 'end': 39.5, 'word': 'si'}, {'start': 39.5, 'end': 39.8, 'word': 'ruppe'}, {'start': 39.8, 'end': 41.0, 'word': 'una'}, {'start': 41.0, 'end': 41.1, 'word': 'gamba'}, {'start': 41.1, 'end': 43.0, 'word': 'un'}, {'start': 43.0, 'end': 43.4, 'word': 'altro'}, {'start': 43.4, 'end': 43.7, 'word': 'vecchio'}, {'start': 43.7, 'end': 44.0, 'word': 'proverbio'}, {'start': 44.0, 'end': 45.0, 'word': 'and\xc3\xb2'}, {'start': 45.0, 'end': 45.2, 'word': 'a'}, {'start': 45.2, 'end': 46.3, 'word': 'vedere'}, {'start': 46.3, 'end': 46.7, 'word': 'una'}, {'start': 46.7, 'end': 46.9, 'word': 'partita'}, {'start': 46.9, 'end': 47.2, 'word': 'di'}, {'start': 47.2, 'end': 47.3, 'word': 'calcio'}, {'start': 47.3, 'end': 49.0, 'word': 'prese'}, {'start': 49.0, 'end': 49.2, 'word': 'da'}, {'start': 49.2, 'end': 49.6, 'word': 'una'}, {'start': 49.6, 'end': 50.0, 'word': 'parte'}, {'start': 50.0, 'end': 50.1, 'word': 'il'}, {'start': 50.1, 'end': 50.9, 'word': 'giocatore'}, {'start': 50.9, 'end': 51.6, 'word': 'un'}, {'start': 51.6, 'end': 51.7, 'word': 'giocatore'}, {'start': 51.7, 'end': 53.3, 'word': 'su'}, {'start': 53.3, 'end': 53.5, 'word': 'uno'}, {'start': 53.5, 'end': 54.5, 'word': "nell'orecchio"}, {'start': 54.5, 'end': 55.5, 'word': 'che'}, {'start': 55.5, 'end': 55.7, 'word': 'fa'}, {'start': 55.7, 'end': 56.0, 'word': 'da'}, {'start': 56.0, 'end': 56.2, 'word': 's\xc3\xa9'}, {'start': 56.2, 'end': 57.5, 'word': 'Chi'}, {'start': 57.5, 'end': 57.7, 'word': 'fa'}, {'start': 57.7, 'end': 58.0, 'word': 'da'}, {'start': 58.0, 'end': 58.2, 'word': 's\xc3\xa9'}, {'start': 58.2, 'end': 58.4, 'word': 'fa'}, {'start': 58.4, 'end': 58.9, 'word': 'per'}, {'start': 58.9, 'end': 59.4, 'word': 'te'}, {'start': 60.1, 'end': 61.0, 'word': 'mentre'}, {'start': 61.0, 'end': 62.3, 'word': 'il'}, {'start': 62.3, 'end': 62.8, 'word': 'giocatore'}, {'start': 62.8, 'end': 63.1, 'word': 'si'}, {'start': 63.1, 'end': 63.5, 'word': 'prov\xc3\xb2'}, {'start': 63.5, 'end': 63.7, 'word': 'a'}, {'start': 63.7, 'end': 64.5, 'word': 'giocare'}, {'start': 64.5, 'end': 65.2, 'word': 'il'}, {'start': 65.2, 'end': 65.5, 'word': 'pallone'}, {'start': 65.5, 'end': 66.0, 'word': 'da'}, {'start': 66.0, 'end': 66.5, 'word': 'solo'}, {'start': 66.5, 'end': 67.6, 'word': 'ma'}, {'start': 67.6, 'end': 68.0, 'word': 'era'}, {'start': 68.0, 'end': 68.5, 'word': 'una'}, {'start': 68.5, 'end': 68.8, 'word': 'noia'}, {'start': 68.8, 'end': 69.1, 'word': 'da'}, {'start': 69.1, 'end': 69.4, 'word': 'morire'}, {'start': 69.4, 'end': 70.1, 'word': 'e'}, {'start': 70.1, 'end': 70.6, 'word': 'non'}, {'start': 70.6, 'end': 71.3, 'word': 'poteva'}, {'start': 71.3, 'end': 71.7, 'word': 'vincere'}, {'start': 71.7, 'end': 72.2, 'word': 'mai'}, {'start': 72.2, 'end': 73.2, 'word': 'perci\xc3\xb2'}, {'start': 73.2, 'end': 73.6, 'word': 'fece'}, {'start': 73.6, 'end': 74.3, 'word': 'ritorno'}, {'start': 74.3, 'end': 74.5, 'word': 'in'}, {'start': 74.5, 'end': 75.1, 'word': 'squadra'}, {'start': 75.1, 'end': 76.1, 'word': 'il'}, {'start': 76.1, 'end': 76.5, 'word': 'vecchio'}, {'start': 76.5, 'end': 77.1, 'word': 'proverbio'}, {'start': 77.1, 'end': 77.7, 'word': 'per'}, {'start': 77.7, 'end': 77.8, 'word': 'il'}, {'start': 77.8, 'end': 78.4, 'word': 'disappunto'}, {'start': 78.4, 'end': 80.5, 'word': 'si'}, {'start': 80.5, 'end': 80.8, 'word': 'ammal\xc3\xb2'}, {'start': 80.8, 'end': 80.9, 'word': 'e'}, {'start': 80.9, 'end': 81.9, 'word': 'dovete'}, {'start': 81.9, 'end': 82.8, 'word': 'toglierli'}, {'start': 82.8, 'end': 83.5, 'word': 'le'}, {'start': 83.5, 'end': 84.3, 'word': 'tonsille'}, {'start': 84.3, 'end': 86.4, 'word': 'una'}, {'start': 86.4, 'end': 86.8, 'word': 'volta'}, {'start': 86.8, 'end': 87.1, 'word': 'tre'}, {'start': 87.1, 'end': 87.4, 'word': 'vecchi'}, {'start': 87.4, 'end': 87.7, 'word': 'proverbi'}, {'start': 87.7, 'end': 88.2, 'word': 'si'}, {'start': 88.2, 'end': 89.1, 'word': 'incontrarono'}, {'start': 89.1, 'end': 89.4, 'word': 'e'}, {'start': 89.4, 'end': 90.7, 'word': 'Avevano'}, {'start': 90.7, 'end': 91.8, 'word': 'appena'}, {'start': 91.8, 'end': 92.0, 'word': 'aperto'}, {'start': 92.0, 'end': 92.7, 'word': 'bocca'}, {'start': 92.7, 'end': 93.5, 'word': 'che'}, {'start': 93.5, 'end': 94.3, 'word': 'cominciarono'}, {'start': 94.3, 'end': 94.6, 'word': 'a'}, {'start': 94.6, 'end': 94.6, 'word': 'litigare'}, {'start': 94.6, 'end': 96.2, 'word': 'che'}, {'start': 96.2, 'end': 96.7, 'word': 'bene'}, {'start': 96.7, 'end': 97.4, 'word': 'comincia'}, {'start': 97.4, 'end': 97.6, 'word': 'a'}, {'start': 97.6, 'end': 98.8, 'word': 'met\xc3\xa0'}, {'start': 98.8, 'end': 99.4, 'word': "dell'opera"}, {'start': 99.4, 'end': 100.3, 'word': 'disse'}, {'start': 100.3, 'end': 100.3, 'word': 'il'}, {'start': 100.3, 'end': 100.6, 'word': 'primo'}, {'start': 100.6, 'end': 100.9, 'word': 'Niente'}, {'start': 100.9, 'end': 102.0, 'word': 'affatto'}, {'start': 102.0, 'end': 102.5, 'word': 'disse'}, {'start': 102.5, 'end': 102.6, 'word': 'il'}, {'start': 102.6, 'end': 103.2, 'word': 'secondo'}, {'start': 103.2, 'end': 104.0, 'word': 'la'}, {'start': 104.0, 'end': 104.4, 'word': 'virt\xc3\xb9'}, {'start': 104.4, 'end': 104.6, 'word': 'sta'}, {'start': 104.6, 'end': 104.8, 'word': 'nel'}, {'start': 104.8, 'end': 105.1, 'word': 'mezzo'}, {'start': 105.1, 'end': 105.6, 'word': 'gravissimo'}, {'start': 105.6, 'end': 108.2, 'word': 'errore'}, {'start': 108.2, 'end': 108.6, 'word': 'al'}, {'start': 108.6, 'end': 109.2, 'word': 'terzo'}, {'start': 109.2, 'end': 109.7, 'word': 'il'}, {'start': 109.7, 'end': 110.2, 'word': 'dolce'}, {'start': 110.2, 'end': 110.3, 'word': 'in'}, {'start': 110.3, 'end': 110.9, 'word': 'fondo'}, {'start': 112.1, 'end': 112.5, 'word': 'Si'}, {'start': 112.5, 'end': 112.9, 'word': 'prese'}, {'start': 112.9, 'end': 113.2, 'word': 'per'}, {'start': 113.2, 'end': 113.2, 'word': 'i'}, {'start': 113.2, 'end': 113.5, 'word': 'capelli'}, {'start': 113.5, 'end': 114.4, 'word': 'si'}, {'start': 114.4, 'end': 114.8, 'word': 'presero'}, {'start': 114.8, 'end': 114.9, 'word': 'per'}, {'start': 114.9, 'end': 115.1, 'word': 'i'}, {'start': 115.1, 'end': 115.6, 'word': 'capelli'}, {'start': 115.6, 'end': 116.0, 'word': 'sono'}, {'start': 116.0, 'end': 116.2, 'word': 'ancora'}, {'start': 116.2, 'end': 117.9, 'word': 'l\xc3\xa0'}, {'start': 117.9, 'end': 118.1, 'word': 'che'}, {'start': 118.1, 'end': 118.4, 'word': 'si'}, {'start': 118.4, 'end': 118.6, 'word': 'd\xc3\xa0'}, {'start': 118.6, 'end': 118.7, 'word': 'che'}, {'start': 118.7, 'end': 119.6, 'word': 'se'}, {'start': 119.6, 'end': 119.8, 'word': 'le'}, {'start': 119.8, 'end': 120.0, 'word': 'danno'}, {'start': 120.0, 'end': 121.9, 'word': 'poi'}, {'start': 121.9, 'end': 122.0, 'word': "c'\xc3\xa8"}, {'start': 122.0, 'end': 122.2, 'word': 'la'}, {'start': 122.2, 'end': 122.4, 'word': 'storia'}, {'start': 122.4, 'end': 122.8, 'word': 'di'}, {'start': 122.8, 'end': 123.0, 'word': 'quel'}, {'start': 123.0, 'end': 123.2, 'word': 'vecchio'}, {'start': 123.2, 'end': 123.4, 'word': 'proverbio'}, {'start': 123.4, 'end': 124.0, 'word': 'che'}, {'start': 124.0, 'end': 124.4, 'word': 'aveva'}, {'start': 124.4, 'end': 124.6, 'word': 'voglia'}, {'start': 124.6, 'end': 124.9, 'word': 'di'}, {'start': 124.9, 'end': 125.3, 'word': 'una'}, {'start': 125.3, 'end': 127.0, 'word': 'pera'}, {'start': 127.0, 'end': 127.1, 'word': 'e'}, {'start': 127.1, 'end': 128.0, 'word': 'si'}, {'start': 128.0, 'end': 128.3, 'word': 'mise'}, {'start': 128.3, 'end': 128.6, 'word': 'sotto'}, {'start': 128.6, 'end': 129.2, 'word': "l'albero"}, {'start': 129.2, 'end': 129.3, 'word': 'e'}, {'start': 129.3, 'end': 130.2, 'word': 'intanto'}, {'start': 130.2, 'end': 130.9, 'word': 'pensava'}, {'start': 130.9, 'end': 132.0, 'word': 'quando'}, {'start': 132.0, 'end': 132.2, 'word': 'la'}, {'start': 132.2, 'end': 132.5, 'word': 'pera'}, {'start': 132.5, 'end': 132.6, 'word': 'e'}, {'start': 132.6, 'end': 132.7, 'word': 'matura'}, {'start': 132.7, 'end': 133.7, 'word': 'casca'}, {'start': 133.7, 'end': 133.9, 'word': 'da'}, {'start': 133.9, 'end': 134.0, 'word': 'se'}, {'start': 134.0, 'end': 135.0, 'word': 'ma'}, {'start': 135.0, 'end': 135.1, 'word': 'la'}, {'start': 135.1, 'end': 135.5, 'word': 'pera'}, {'start': 135.5, 'end': 135.9, 'word': 'casc\xc3\xb2'}, {'start': 135.9, 'end': 137.2, 'word': 'solo'}, {'start': 137.2, 'end': 137.5, 'word': 'quando'}, {'start': 137.5, 'end': 137.7, 'word': 'fu'}, {'start': 137.7, 'end': 138.3, 'word': 'marcia'}, {'start': 138.3, 'end': 139.4, 'word': 'marcia'}, {'start': 139.4, 'end': 139.9, 'word': 'fradicia'}, {'start': 139.9, 'end': 140.0, 'word': 'e'}, {'start': 140.0, 'end': 140.9, 'word': 'si'}, {'start': 140.9, 'end': 141.2, 'word': 'spiaccic\xc3\xb2'}, {'start': 141.2, 'end': 143.4, 'word': 'sulla'}, {'start': 143.4, 'end': 144.1, 'word': 'zucca'}, {'start': 144.1, 'end': 144.4, 'word': 'del'}, {'start': 144.4, 'end': 145.0, 'word': 'vecchio'}, {'start': 145.0, 'end': 145.3, 'word': 'proverbio'}, {'start': 145.3, 'end': 145.7, 'word': 'che'}, {'start': 145.7, 'end': 146.5, 'word': 'per'}, {'start': 146.5, 'end': 146.7, 'word': 'il'}, {'start': 146.7, 'end': 147.0, 'word': 'dispiacere'}, {'start': 147.0, 'end': 148.2, 'word': 'diede'}, {'start': 148.2, 'end': 149.3, 'word': 'le'}, {'start': 149.3, 'end': 149.4, 'word': 'dimissioni'}]
 


